---
title: Integrações
description: Aprenda como conectar serviços externos e APIs no deco.chat
icon: Link
---

import Callout from "../../../components/ui/Callout.astro";

Integrações conectam seu servidor MCP a serviços externos como Gmail, bancos de dados, armazenamento de arquivos e APIs. Conecte a qualquer coisa desde APIs SaaS até o banco da sua empresa.

### Adicionando Integrações

1. Vá para seu workspace no deco.chat
2. Clique em **Add Integration**
3. Selecione um serviço (ex: Gmail)
4. Complete o fluxo OAuth ou forneça chaves de API
5. A integração fica disponível no seu objeto `Env`

<Callout type="info">
  Integrações OAuth podem mostrar avisos de segurança durante o beta. Isso é normal - as integrações são seguras para usar.
</Callout>

## Usando Integrações

### Adicionar ao Seu Projeto

No diretório `server/` do seu projeto MCP:

```bash
deco add
```

Selecione a integração para adicioná-la ao seu projeto. Isso atualiza seu `wrangler.toml` com o binding.

### Gerar Tipos

```bash
npm run gen
```

Isso atualiza seus tipos TypeScript para que você possa chamar métodos de integração como `env.gmail.sendEmail` com autocompletar completo.

### Usar em Tools

```typescript
const createSendEmailTool = (env: Env) =>
  createTool({
    id: "SEND_EMAIL",
    description: "Send an email via Gmail",
    inputSchema: z.object({
      to: z.string().email(),
      subject: z.string(),
      body: z.string(),
    }),
    outputSchema: z.object({ success: z.boolean() }),
    execute: async ({ inputData }) => {
      await env.gmail.sendEmail({
        to: inputData.to,
        subject: inputData.subject,
        body: inputData.body,
      });
      return { success: true };
    },
  });
```

## Custom Integrations

For services without built-in integrations, you have two options:

### HTTP Tools

Create custom tools using `fetch` for any REST API:

```typescript
const createInventoryTool = (env: Env) =>
  createTool({
    id: "GET_INVENTORY",
    description: "Get inventory information",
    inputSchema: z.object({ id: z.string() }),
    outputSchema: z.object({ name: z.string(), stock: z.number() }),
    execute: async ({ inputData }) => {
      const response = await fetch(
        `${env.INVENTORY_API_URL}/items?id=${inputData.id}`,
        {
          headers: { Authorization: `Bearer ${env.INVENTORY_API_KEY}` },
        }
      );
      return await response.json();
    },
  });
```

Store API keys in your `wrangler.toml`:

```toml
[env.production.vars]
INVENTORY_API_KEY = "your-api-key-here"
INVENTORY_API_URL = "https://api.example.com"
```

### Custom Integration (Advanced)

Build reusable integrations that can be shared across tools. For most cases, HTTP tools are sufficient.

## Database Integration

Every workspace includes a built-in SQLite database with physical isolation:

```typescript
const createSaveCustomerTool = (env: Env) =>
  createTool({
    id: "SAVE_CUSTOMER",
    description: "Save customer data to database",
    inputSchema: z.object({
      name: z.string(),
      email: z.string().email(),
    }),
    outputSchema: z.object({ id: z.number() }),
    execute: async ({ context, inputData }) => {
      const result = await context.runtime.workspace.db.run(
        "INSERT INTO customers (name, email) VALUES (?, ?) RETURNING id",
        [inputData.name, inputData.email]
      );
      return { id: result.meta.last_row_id };
    },
  });
```

### Cloudflare Storage

Since your backend runs on Cloudflare Workers, you can also use:

- **Cloudflare D1**: SQL database
- **Workers KV**: Key-value store
- **Durable Objects**: Stateful storage with coordination
- **R2**: Object storage (S3-compatible)

Configure these in `wrangler.toml` and access via `env` bindings.

### External Databases

Connect to external databases via HTTP APIs (Supabase, Firebase, etc.) or direct connections where supported.

## Knowledge Base Integration

The Knowledge Base handles unstructured data like PDFs, documents, and text files:

1. Upload documents in the deco.chat UI
2. The platform automatically indexes and vectorizes content
3. Agents retrieve relevant snippets during conversations
4. No code required - handled by retrieval-augmented generation

For programmatic access, Knowledge Base tools appear in your `Env` object when available.

## File Systems

Workers are serverless, so you can't access local file systems. For file handling:

- **Knowledge Base**: For text documents and PDFs
- **Cloud Storage**: Use R2, S3, or other APIs for file storage
- **Integrations**: Google Drive, Dropbox, etc. for existing files

## Using in Workflows

Chain multiple integrations in workflows:

```typescript
const createSupportWorkflow = (env: Env) => {
  const fetchData = createStepFromTool(createDatabaseTool(env));
  const generateSummary = createStepFromTool(createLLMTool(env));
  const sendEmail = createStepFromTool(createEmailTool(env));

  return createWorkflow({
    id: "CUSTOMER_SUPPORT",
    inputSchema: z.object({
      customerEmail: z.string(),
      question: z.string(),
    }),
    outputSchema: z.object({ emailSent: z.boolean() }),
  })
    .then(fetchData)
    .then(generateSummary)
    .then(sendEmail)
    .commit();
};
```

<Callout type="warning">
  Integration issues are a common source of runtime errors. Always verify credentials and test after deployment.
</Callout>