---
title: Deployment
description: Aprenda como fazer deploy de suas aplicações deco para produção
icon: Rocket
---

Quando você estiver pronto para compartilhar seu app com o mundo (ou sua equipe), você fará o deploy para Cloudflare Workers via deco CLI. 
O deployment no deco é notavelmente simples comparado a apps tradicionais – já que toda sua stack é serverless 
e vive no edge da Cloudflare, ir para produção é frequentemente apenas um comando.

No template padrão, tudo o que precisa é executar `npm run deploy` na raiz do seu projeto.

## Processo de Build e Deploy

### 1. Build do frontend

O script `npm run deploy` tipicamente executará `npm run build` no diretório `/view` para produzir arquivos 
estáticos otimizados (se você tiver um frontend). Isso gera uma pasta `dist/` ou `build/` com seus assets HTML, JS, CSS prontos para produção.

### 2. Building do worker e upload dos assets da view

Após fazer o build da view, o script de deploy dispara o build do Cloudflare Workers. Por baixo dos panos isso
chamará `wrangler build` ou usará a API de deployment do deco CLI diretamente com Typescript. Ele pega seu `server/main.ts` 
(e dependências bundleadas) e faz upload para a Cloudflare, junto com os assets estáticos (que são enviados para Workers KV ou 
como um bundle de assets). O `wrangler.toml` é usado para identificar seu projeto e configuração de bindings.

Isso exigirá que você esteja autenticado localmente (você pode sempre executar `npx deco-cli login`) na sua própria máquina;
Mas também pode ser feito passando um token de API com permissão para acessar o recurso `HOSTING_APP_DEPLOY` no seu projeto, frequentemente
útil para executar deployment automatizado de CI/CD.

> O token da api pode ser especificado no argumento `deco deploy -t`.

Quando `deco deploy` terminar, seu app estará live em uma URL, provavelmente algo como 
`https://<app-name>.deco.page`. A CLI ou output mostrará o endereço deployado.

## Notas sobre Runtime do Cloudflare Workers

- Seu código executa na rede edge global da Cloudflare. Isso significa acesso de baixa latência para usuários ao redor do mundo e escalabilidade automática. 

- Se seus workflows ou tools fazem computação pesada ou aguardam APIs externas, tudo bem – apenas seja cuidadoso para usar esperas assíncronas adequadamente 
(o que você provavelmente já faz, já que a maioria das operações I/O é via chamadas `await`). A Cloudflare suspenderá o worker durante esperas de fetch então não conta muito contra o tempo de CPU.

## Domínios Personalizados

> Guia Em Breve

## Testes Pós-Deploy

Sempre teste seu agente deployado como um usuário faria:

- Abra a URL de produção, certifique-se de que o frontend carrega.
- Tente interagir com o agente (o Worker deve estar live e respondendo).
- Verifique se as integrações (que podem ter credenciais diferentes em prod) funcionam como esperado.

## Rollbacks e Atualizações

Se algo der errado, você pode atualizar seu código e fazer deploy novamente. Nós não temos um rollback de versão integrado via 
CLI, mas como deployments são rápidos, você pode re-fazer deploy de uma versão estável anterior do seu código. É sábio usar controle de 
versão (git) para seu projeto para que você possa reverter alterações localmente e refazer o deploy.