---
title: Debugging
description: Problemas comuns e estratégias de debugging para desenvolvimento deco.chat
icon: Bug
---

import Callout from "../../../components/ui/Callout.astro";

Estratégias comuns de debugging e soluções para construir agentes de IA e workflows.

## Logging

Use `console.log` extensivamente nas suas tools e workflows:

```typescript
execute: async ({ inputData }) => {
  console.log("Tool input:", inputData);
  const result = await someOperation(inputData);
  console.log("Tool output:", result);
  return result;
}
```

**Desenvolvimento local**: Logs aparecem no seu terminal durante `npm run dev`
**Produção**: Use `wrangler tail` ou dashboard Cloudflare → Workers → Logs

<Callout type="warning">
  Não registre informações sensíveis em produção.
</Callout>

## Erros de Tipo

A maioria dos erros TypeScript vem de tipos gerados desatualizados:

```bash
npm run gen      # Após adicionar integrações
npm run gen:self # Após adicionar tools/workflows
```

Problemas comuns:
- Tool não aparece em `client.tools` → Execute `gen:self`
- Integração undefined → Verifique setup da integração, execute `gen`
- Schemas não coincidem → Garanta que schemas Zod coincidem com tipos TypeScript

## Erros de Integração

Quando chamadas de API externa falham:

1. **Verifique setup da integração**: Conectada na UI do deco.chat?
2. **Verifique credenciais**: Chaves de API válidas e não expiradas?
3. **Check environment**: Integration available in `env` object?
4. **Examine API response**: Log error status codes (401, 400, etc.)

```typescript
execute: async ({ inputData }) => {
  try {
    return await env.gmail.sendEmail(inputData);
  } catch (error) {
    console.error("Gmail error:", error.response?.status, error.message);
    throw error;
  }
}
```

## Workflow Issues

**Data flow problems**: Use `.map()` to transform data between steps:

```typescript
.then(step1)
.map(({ step1Output }) => ({ 
  transformedInput: step1Output.someField 
}))
.then(step2)
```

**Missing `.commit()`**: Workflows won't register without it:

```typescript
return createWorkflow({ ... })
  .then(step)
  .commit(); // ← Don't forget this!
```

**Branch conditions**: Ensure at least one condition is true:

```typescript
.branch([
  { condition: ({ data }) => data.type === "A", steps: [stepA] },
  { condition: () => true, steps: [defaultStep] }, // fallback
])
```

**Infinite loops**: Test loop conditions with dummy data:

```typescript
.dountil(
  createStepFromTool(checkStatus(env)),
  ({ checkStatusOutput }) => checkStatusOutput.complete || attempts > 10
)
```

## Deployment Problems

**`deco deploy` fails**:
1. Authentication: Run `deco login`
2. Build errors: Test `npm run build` first
3. Configuration: Check `wrangler.toml` settings

**App deployed but not working**:
- Test the workers.dev URL directly
- Verify integrations work in production environment
- Check production logs for errors
